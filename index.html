<!DOCTYPE html>
<html>
<head>
<title>日本語から英語へのリアルタイム翻訳</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: "Roboto", sans-serif;
  margin: 0;
  padding: 0;
}

.container {
  width: 100%;
  height: 100%;
  background-color: green;
}

.input {
  width: 100%;
  height: 100px;
  border: 1px solid black;
}

.output {
  width: 100%;
  height: 100px;
  border: 1px solid black;
}

.button {
  width: 100px;
  height: 30px;
  background-color: blue;
  color: white;
  font-size: 18px;
  border: none;
}
</style>
</head>
<body>
<div class="container">
  <div class="input">
    <input type="text" id="input" />
  </div>
  <div class="output">
    <input type="text" id="output" readonly />
  </div>
  <input type="button" id="button" value="翻訳" />
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
$(function() {
  // 音声入力の準備
  navigator.mediaDevices.getUserMedia({
    audio: true
  }).then(function(stream) {
    // 音声入力を認識する
    var recorder = new MediaRecorder(stream);
    recorder.ondataavailable = function(event) {
      // 音声データを取得
      var data = event.data;
      // 音声データをテキストに変換
      var text = speechToText(data);
      // テキストを表示
      $("#output").val(text);
    };
    recorder.start();
  });

  // 翻訳ボタンをクリックしたときに翻訳する
  $("#button").click(function() {
    // 日本語テキストを取得
    var text = $("#input").val();
    // 日本語テキストを英語に変換
    var translatedText = translate(text, "ja", "en");
    // 英語テキストを表示
    $("#output").val(translatedText);
  });

  // 音声をテキストに変換する関数
  function speechToText(data) {
    // 音声データをGoogle Cloud Speech-to-Text APIに送信
    var request = new SpeechRecognitionRequest();
    request.audioContent = data;
    var response = speech.recognize(request);
    // テキストを取得
    var text = response.results[0].alternatives[0].transcript;
    return text;
  }

  // テキストを翻訳する関数
  function translate(text, from, to) {
    // テキストをGoogle Cloud Translation APIに送信
    var request = new TranslationRequest();
    request.source = from;
    request.target = to;
    request.text = text;
    var response = translation.translate(request);
    // 翻訳されたテキストを取得
    var translatedText = response.translations[0].translatedText;
    return translatedText;
  }
});
</script>
</body>
</html>
