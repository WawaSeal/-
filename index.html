<!DOCTYPE html>
<html>
<head>
  <title>Japanese to English Realtime Translation</title>
</head>
<body>
  <div id="container">
    <h1>Japanese to English Realtime Translation</h1>
    <div id="microphone">
      <input type="hidden" id="microphone-stream" />
      <button id="start-recording">Start Recording</button>
      <button id="stop-recording">Stop Recording</button>
    </div>
    <div id="translation"></div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/microphone-stream/0.9.0/microphone-stream.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/google-translate-element/2.0.5/js/translate.min.js"></script>
  <script>
    const microphone = new MicrophoneStream();
    const translate = new TranslateElement({
      target: document.getElementById("translation"),
      from: "ja",
      to: "en"
    });

    document.getElementById("start-recording").addEventListener("click", () => {
      microphone.startRecording();
      translate.startListening();
    });

    document.getElementById("stop-recording").addEventListener("click", () => {
      microphone.stopRecording();
      translate.stopListening();
    });

    microphone.addEventListener("data", (data) => {
      translate.translate(data.text);
    });
  </script>
</body>
</html>
